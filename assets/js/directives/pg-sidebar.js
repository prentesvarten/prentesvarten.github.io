/* ============================================================
 * Directive: pgSidebar
 * AngularJS directive for Pages Sidebar jQuery plugin
 * ============================================================ */

'use strict';

angular.module('app').directive('pgSidebar', function () {
  return {
    restrict: 'A',
    link: function link(scope, element) {
      var $sidebar = $(element);

      $sidebar.sidebar($sidebar.data());

      // Bind events
      // Toggle sub menus
      $('body').on('click', '.sidebar-menu a', function (e) {

        if ($(this).parent().children('.sub-menu') === false) {
          return;
        }
        var el = $(this);
        var parent = $(this).parent().parent();
        var li = $(this).parent();
        var sub = $(this).parent().children('.sub-menu');

        if (li.hasClass('active open')) {
          el.children('.arrow').removeClass('active open');
          sub.slideUp(200, function () {
            li.removeClass('active open');
          });
        } else {
          parent.children('li.open').children('.sub-menu').slideUp(200);
          parent.children('li.open').children('a').children('.arrow').removeClass('active open');
          parent.children('li.open').removeClass('open active');
          el.children('.arrow').addClass('active open');
          sub.slideDown(200, function () {
            li.addClass('active open');
          });
        }
      });
    }
  };
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvcGctc2lkZWJhci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiJHNpZGViYXIiLCIkIiwic2lkZWJhciIsImRhdGEiLCJvbiIsImUiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImVsIiwibGkiLCJzdWIiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwic2xpZGVVcCIsImFkZENsYXNzIiwic2xpZGVEb3duIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7QUFLQTs7QUFFQUEsUUFBUUMsTUFBUixDQUFlLEtBQWYsRUFDS0MsU0FETCxDQUNlLFdBRGYsRUFDNEIsWUFBVztBQUNqQyxTQUFPO0FBQ0xDLGNBQVUsR0FETDtBQUVMQyxVQUFNLGNBQVNDLEtBQVQsRUFBZ0JDLE9BQWhCLEVBQXlCO0FBQzdCLFVBQU1DLFdBQVdDLEVBQUVGLE9BQUYsQ0FBakI7O0FBRUFDLGVBQVNFLE9BQVQsQ0FBaUJGLFNBQVNHLElBQVQsRUFBakI7O0FBRUE7QUFDQTtBQUNBRixRQUFFLE1BQUYsRUFBVUcsRUFBVixDQUFhLE9BQWIsRUFBc0IsaUJBQXRCLEVBQXlDLFVBQVNDLENBQVQsRUFBWTs7QUFFbkQsWUFBSUosRUFBRSxJQUFGLEVBQVFLLE1BQVIsR0FBaUJDLFFBQWpCLENBQTBCLFdBQTFCLE1BQTJDLEtBQS9DLEVBQXNEO0FBQ3BEO0FBQ0Q7QUFDRCxZQUFNQyxLQUFLUCxFQUFFLElBQUYsQ0FBWDtBQUNBLFlBQU1LLFNBQVNMLEVBQUUsSUFBRixFQUFRSyxNQUFSLEdBQWlCQSxNQUFqQixFQUFmO0FBQ0EsWUFBTUcsS0FBS1IsRUFBRSxJQUFGLEVBQVFLLE1BQVIsRUFBWDtBQUNBLFlBQU1JLE1BQU1ULEVBQUUsSUFBRixFQUFRSyxNQUFSLEdBQWlCQyxRQUFqQixDQUEwQixXQUExQixDQUFaOztBQUVBLFlBQUdFLEdBQUdFLFFBQUgsQ0FBWSxhQUFaLENBQUgsRUFBOEI7QUFDNUJILGFBQUdELFFBQUgsQ0FBWSxRQUFaLEVBQXNCSyxXQUF0QixDQUFrQyxhQUFsQztBQUNBRixjQUFJRyxPQUFKLENBQVksR0FBWixFQUFpQixZQUFXO0FBQzFCSixlQUFHRyxXQUFILENBQWUsYUFBZjtBQUNELFdBRkQ7QUFJRCxTQU5ELE1BTU87QUFDTE4saUJBQU9DLFFBQVAsQ0FBZ0IsU0FBaEIsRUFBMkJBLFFBQTNCLENBQW9DLFdBQXBDLEVBQWlETSxPQUFqRCxDQUF5RCxHQUF6RDtBQUNBUCxpQkFBT0MsUUFBUCxDQUFnQixTQUFoQixFQUEyQkEsUUFBM0IsQ0FBb0MsR0FBcEMsRUFBeUNBLFFBQXpDLENBQWtELFFBQWxELEVBQTRESyxXQUE1RCxDQUF3RSxhQUF4RTtBQUNBTixpQkFBT0MsUUFBUCxDQUFnQixTQUFoQixFQUEyQkssV0FBM0IsQ0FBdUMsYUFBdkM7QUFDQUosYUFBR0QsUUFBSCxDQUFZLFFBQVosRUFBc0JPLFFBQXRCLENBQStCLGFBQS9CO0FBQ0FKLGNBQUlLLFNBQUosQ0FBYyxHQUFkLEVBQW1CLFlBQVc7QUFDNUJOLGVBQUdLLFFBQUgsQ0FBWSxhQUFaO0FBRUQsV0FIRDtBQUlEO0FBQ0YsT0ExQkQ7QUE0QkQ7QUFyQ0ksR0FBUDtBQXVDRCxDQXpDTCIsImZpbGUiOiJkaXJlY3RpdmVzL3BnLXNpZGViYXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIERpcmVjdGl2ZTogcGdTaWRlYmFyXG4gKiBBbmd1bGFySlMgZGlyZWN0aXZlIGZvciBQYWdlcyBTaWRlYmFyIGpRdWVyeSBwbHVnaW5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3BnU2lkZWJhcicsIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCAkc2lkZWJhciA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgICAkc2lkZWJhci5zaWRlYmFyKCRzaWRlYmFyLmRhdGEoKSk7XG5cbiAgICAgICAgICAvLyBCaW5kIGV2ZW50c1xuICAgICAgICAgIC8vIFRvZ2dsZSBzdWIgbWVudXNcbiAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5zaWRlYmFyLW1lbnUgYScsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgaWYgKCQodGhpcykucGFyZW50KCkuY2hpbGRyZW4oJy5zdWItbWVudScpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbCA9ICQodGhpcyk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICAgICAgY29uc3QgbGkgPSAkKHRoaXMpLnBhcmVudCgpO1xuICAgICAgICAgICAgY29uc3Qgc3ViID0gJCh0aGlzKS5wYXJlbnQoKS5jaGlsZHJlbignLnN1Yi1tZW51Jyk7XG5cbiAgICAgICAgICAgIGlmKGxpLmhhc0NsYXNzKCdhY3RpdmUgb3BlbicpKXtcbiAgICAgICAgICAgICAgZWwuY2hpbGRyZW4oJy5hcnJvdycpLnJlbW92ZUNsYXNzKCdhY3RpdmUgb3BlbicpO1xuICAgICAgICAgICAgICBzdWIuc2xpZGVVcCgyMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGxpLnJlbW92ZUNsYXNzKCdhY3RpdmUgb3BlbicpO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuKCdsaS5vcGVuJykuY2hpbGRyZW4oJy5zdWItbWVudScpLnNsaWRlVXAoMjAwKTtcbiAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuKCdsaS5vcGVuJykuY2hpbGRyZW4oJ2EnKS5jaGlsZHJlbignLmFycm93JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBvcGVuJyk7XG4gICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbignbGkub3BlbicpLnJlbW92ZUNsYXNzKCdvcGVuIGFjdGl2ZScpO1xuICAgICAgICAgICAgICBlbC5jaGlsZHJlbignLmFycm93JykuYWRkQ2xhc3MoJ2FjdGl2ZSBvcGVuJyk7XG4gICAgICAgICAgICAgIHN1Yi5zbGlkZURvd24oMjAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlIG9wZW4nKTtcblxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuIl19
